(function(){const btn=document.querySelector('.menu-toggle');const menu=document.getElementById('mobile-menu');const panel=menu?.querySelector('.mobile-menu-panel');const closeBtn=menu?.querySelector('.mobile-menu-close');const menuLinks=menu?menu.querySelectorAll('[data-menu-link]'):[];const firstFocusable=menuLinks?.[0]||null;function setToggleState(open){if(!btn)return;btn.classList.toggle('is-open',open);btn.setAttribute('aria-expanded',open);btn.setAttribute('aria-label',open?'Fechar menu':'Abrir menu');const icon=btn.querySelector('.menu-icon');const label=btn.querySelector('.menu-label');if(icon)icon.textContent=open?'✕':'☰';if(label)label.textContent=open?'Fechar':'Menu';open?btn.classList.remove('menu-pulse'):btn.classList.add('menu-pulse')}function openMenu(){if(!menu)return;menu.classList.add('show');menu.setAttribute('aria-hidden','false');document.body.style.overflow='hidden';setToggleState(true);history.pushState({menu:true},'','#menu');setTimeout(()=>{(firstFocusable||closeBtn||btn).focus?.()},0)}function closeMenu(focusToggle=false){if(!menu)return;menu.classList.remove('show');menu.setAttribute('aria-hidden','true');document.body.style.overflow='';setToggleState(false);if(focusToggle)setTimeout(()=>btn?.focus?.(),0)}function toggle(){(!menu?.classList.contains('show'))?openMenu():closeMenu()}btn?.addEventListener('click',()=>toggle());closeBtn?.addEventListener('click',()=>closeMenu());menuLinks.forEach(link=>{link.addEventListener('click',e=>{e.preventDefault();const href=link.getAttribute('href')||'';if(href==='#top'){closeMenu(true);window.scrollTo({top:0,behavior:'smooth'});history.replaceState({ },'','#');return}const id=href.replace(/^#/,'');const el=document.getElementById(id);closeMenu(true);if(el)el.scrollIntoView({behavior:'smooth',block:'start'});history.replaceState({ },'','#'+id)})});menu?.addEventListener('click',ev=>{if(panel&&!panel.contains(ev.target))closeMenu()});window.addEventListener('keydown',ev=>{if(ev.key==='Escape'&&menu?.classList.contains('show'))closeMenu()});window.addEventListener('popstate',()=>{if(menu?.classList.contains('show'))closeMenu(true)});document.querySelectorAll('a.top-link').forEach(a=>{a.addEventListener('click',e=>{e.preventDefault();window.scrollTo({top:0,behavior:'smooth'});history.replaceState({ },'','#')})});const form=document.getElementById('briefing-form');const statusEl=document.getElementById('form-status');if(form){form.addEventListener('submit',async ev=>{ev.preventDefault();const submitBtn=form.querySelector('button[type="submit"]');const data=new FormData(form);const clear=()=>{statusEl.textContent='';statusEl.className='form-status'};clear();if((data.get('website')||'').trim()!=='')return;const consent=form.querySelector('#lgpd');if(!consent||!consent.checked){statusEl.textContent='Para enviar, marque o consentimento LGPD.';statusEl.classList.add('form-status--error');statusEl.scrollIntoView({behavior:'smooth',block:'nearest'});return}if(!data.get('nome')||!data.get('email')||!data.get('mensagem')){statusEl.textContent='Preencha nome, e-mail e mensagem.';statusEl.classList.add('form-status--error');statusEl.scrollIntoView({behavior:'smooth',block:'nearest'});return}data.append('timestamp',new Date().toISOString());submitBtn.disabled=true;const prev=submitBtn.textContent;submitBtn.textContent='Enviando…';try{await fetch(form.action,{method:'POST',body:data,mode:'no-cors'});statusEl.textContent='Recebido. Entraremos em contato em breve.';statusEl.classList.add('form-status--success');statusEl.scrollIntoView({behavior:'smooth',block:'nearest'});form.reset()}catch(err){statusEl.textContent='Não foi possível enviar agora. Tente novamente.';statusEl.classList.add('form-status--error');statusEl.scrollIntoView({behavior:'smooth',block:'nearest'})}finally{submitBtn.disabled=false;submitBtn.textContent=prev}})}const OVERLAY_ID='desktop-advice';const ACK_KEY='b2b_desktop_notice_ack_ts';const DAYS=30;const overlay=document.getElementById(OVERLAY_ID);const share=document.getElementById('desktop-share-url');function daysToMs(d){return 24*d*60*60*1000}function hasAck(){try{const v=parseInt(localStorage.getItem(ACK_KEY)||'0',10);return v&&Date.now()-v<daysToMs(DAYS)}catch{ return false }}function setAck(){try{localStorage.setItem(ACK_KEY,String(Date.now()))}catch{}}function showOverlay(){if(!overlay)return;if(share)share.value=window.location.href;overlay.hidden=false;overlay.classList.add('show');document.body.classList.add('overlay-open')}function hideOverlay(persist){if(!overlay)return;if(persist)setAck();overlay.classList.remove('show');overlay.hidden=true;document.body.classList.remove('overlay-open')}function maybeShow(){if(window.matchMedia('(min-width: 1024px)').matches&&!hasAck())showOverlay()}document.getElementById('desktop-continue')?.addEventListener('click',()=>hideOverlay(true));document.getElementById('desktop-open-mobile')?.addEventListener('click',()=>{const hint=document.getElementById('desktop-hint');const url=document.getElementById('desktop-share-url');hint.hidden=!hint.hidden;if(!hint.hidden&&url){url.value=window.location.href;url.select()}});document.getElementById('desktop-copy-url')?.addEventListener('click',async()=>{const url=document.getElementById('desktop-share-url');try{await navigator.clipboard.writeText(url.value);const b=document.getElementById('desktop-copy-url');const prev=b.textContent;b.textContent='Copiado!';setTimeout(()=>b.textContent=prev,1200)}catch{}});document.getElementById('desktop-advice')?.addEventListener('click',ev=>{if(ev.target.hasAttribute('data-close')||ev.target.classList.contains('overlay__close'))hideOverlay(false)});window.addEventListener('load',maybeShow);window.addEventListener('resize',()=>{const o=document.getElementById('desktop-advice');if(o&&!o.hidden){if(!window.matchMedia('(min-width: 1024px)').matches)hideOverlay(false)}})})();
 //# sourceMappingURL=script.min.js.map
