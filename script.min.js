(()=>{const e=document.querySelector(".menu-toggle"),t=document.getElementById("mobile-menu"),o=t?.querySelector(".mobile-menu-panel"),n=t?.querySelector(".mobile-menu-close"),r=t?t.querySelectorAll("[data-menu-link]"):[],l=r?.[0]||null;function a(t){if(!e)return;e.classList.toggle("is-open",t),e.setAttribute("aria-expanded",t),e.setAttribute("aria-label",t?"Fechar menu":"Abrir menu");const o=e.querySelector(".menu-icon"),n=e.querySelector(".menu-label");o&&(o.textContent=t?"✕":"☰"),n&&(n.textContent=t?"Fechar":"Menu"),t?e.classList.remove("menu-pulse"):e.classList.add("menu-pulse")}function s(){t&&(t.classList.add("show"),t.setAttribute("aria-hidden","false"),document.body.style.overflow="hidden",a(!0),history.pushState({menu:!0},"","#menu"),setTimeout(()=>{(l||n||e).focus?.()},0))}function i(o=!1){t&&(t.classList.remove("show"),t.setAttribute("aria-hidden","true"),document.body.style.overflow="",a(!1),o&&setTimeout(()=>e?.focus?.(),0))}function c(e){(void 0!==e?e:!t?.classList.contains("show"))?s():i()}e?.addEventListener("click",(()=>c())),n?.addEventListener("click",(()=>i())),r.forEach((e=>{e.addEventListener("click",(o=>{o.preventDefault();const n=e.getAttribute("href")||"";if("#top"===n)return i(!0),window.scrollTo({top:0,behavior:"smooth"}),void history.replaceState({},"","#");const r=n.replace(/^#/,""),l=document.getElementById(r);i(!0),l&&l.scrollIntoView({behavior:"smooth",block:"start"}),history.replaceState({},"","#"+r)}))})),t?.addEventListener("click",(e=>{o&&!o.contains(e.target)&&i()})),window.addEventListener("keydown",(e=>{"Escape"===e.key&&t?.classList.contains("show")&&i()})),window.addEventListener("popstate",(()=>{t?.classList.contains("show")&&i(!0)}));const d=document.querySelectorAll("a.top-link");d.forEach((e=>{e.addEventListener("click",(t=>{t.preventDefault(),window.scrollTo({top:0,behavior:"smooth"}),history.replaceState({},"","#")}))}));const u=document.getElementById("briefing-form"),m=document.getElementById("form-status");if(u){u.addEventListener("submit",(async e=>{e.preventDefault();const t=u.querySelector('button[type="submit"]'),o=new FormData(u),n=()=>{m.textContent="",m.className="form-status"};if(n(),""!==(o.get("website")||"").trim())return;const r=u.querySelector("#lgpd");if(!r||!r.checked)return m.textContent="Para enviar, marque o consentimento LGPD.",m.classList.add("form-status--error"),void m.scrollIntoView({behavior:"smooth",block:"nearest"});if(!o.get("nome")||!o.get("email")||!o.get("mensagem"))return m.textContent="Preencha nome, e-mail e mensagem.",m.classList.add("form-status--error"),void m.scrollIntoView({behavior:"smooth",block:"nearest"});o.append("timestamp",(new Date).toISOString()),t.disabled=!0;const l=t.textContent;t.textContent="Enviando…";try{await fetch(u.action,{method:"POST",body:o,mode:"no-cors"}),m.textContent="Recebido. Entraremos em contato em breve.",m.classList.add("form-status--success"),m.scrollIntoView({behavior:"smooth",block:"nearest"}),u.reset()}catch(e){m.textContent="Não foi possível enviar agora. Tente novamente.",m.classList.add("form-status--error"),m.scrollIntoView({behavior:"smooth",block:"nearest"})}finally{t.disabled=!1,t.textContent=l}}))}const h="desktop-advice",p="b2b_desktop_notice_ack_ts",f=30,y=document.getElementById(h),g=document.getElementById("desktop-share-url");function v(e){return 24*e*60*60*1e3}function b(){try{const e=parseInt(localStorage.getItem(p)||"0",10);return e&&Date.now()-e<v(f)}catch(e){return!1}}function E(){try{localStorage.setItem(p,String(Date.now()))}catch(e){}}function S(){y&&(g&&(g.value=window.location.href),y.hidden=!1,y.classList.add("show"),document.body.classList.add("overlay-open"))}function q(e){y&&(e&&E(),y.classList.remove("show"),y.hidden=!0,document.body.classList.remove("overlay-open"))}function L(){window.matchMedia("(min-width: 1024px)").matches&&!b()&&S()}document.getElementById("desktop-continue")?.addEventListener("click",(()=>q(!0))),document.getElementById("desktop-open-mobile")?.addEventListener("click",(()=>{const e=document.getElementById("desktop-hint"),t=document.getElementById("desktop-share-url");e.hidden=!e.hidden,!e.hidden&&t&&(t.value=window.location.href,t.select())})),document.getElementById("desktop-copy-url")?.addEventListener("click",(async()=>{const e=document.getElementById("desktop-share-url");try{await navigator.clipboard.writeText(e.value);const t=document.getElementById("desktop-copy-url"),o=t.textContent;t.textContent="Copiado!",setTimeout((()=>t.textContent=o),1200)}catch(e){}})),document.getElementById("desktop-advice")?.addEventListener("click",(e=>{(e.target.hasAttribute("data-close")||e.target.classList.contains("overlay__close"))&&q(!1)})),window.addEventListener("load",L),window.addEventListener("resize",(()=>{const e=document.getElementById("desktop-advice");e&&!e.hidden&&(window.matchMedia("(min-width: 1024px)").matches||q(!1))}))})();
