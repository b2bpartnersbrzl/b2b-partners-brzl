(function(){const e=document.querySelector(".menu-toggle"),t=document.getElementById("mobile-menu"),o=t?.querySelector(".mobile-menu-panel"),n=t?.querySelector(".mobile-menu-close"),a=t?t.querySelectorAll("[data-menu-link]"):[],l=a?.[0]||null;function i(t){e&&(e.classList.toggle("is-open",t),e.setAttribute("aria-expanded",t),e.setAttribute("aria-label",t?"Fechar menu":"Abrir menu"));const o=e?.querySelector(".menu-icon"),n=e?.querySelector(".menu-label");o&&(o.textContent=t?"✕":"☰"),n&&(n.textContent=t?"Fechar":"Menu"),t?e?.classList.remove("menu-pulse"):e?.classList.add("menu-pulse")}function s(){t&&(t.classList.add("show"),t.setAttribute("aria-hidden","false"),document.body.style.overflow="hidden",i(!0));try{history.pushState({menu:!0},"","#menu")}catch(e){}setTimeout(()=>{(l||n||e).focus?.()},0)}function r(o=!1){t&&(t.classList.remove("show"),t.setAttribute("aria-hidden","true"),document.body.style.overflow="",i(!1),o&&setTimeout(()=>e?.focus?.(),0))}function c(){const e=t?.classList.contains("show");(void 0!==arguments[0]?arguments[0]:!e)?s():r()}e?.addEventListener("click",(()=>c())),n?.addEventListener("click",(()=>r())),t?.addEventListener("click",e=>{o&&!o.contains(e.target)&&r()}),window.addEventListener("keydown",e=>{"Escape"===e.key&&t?.classList.contains("show")&&r()}),window.addEventListener("popstate",(()=>{t?.classList.contains("show")&&r(!0)}));document.querySelectorAll("a.top-link").forEach(e=>{e.addEventListener("click",e=>{e.preventDefault(),window.scrollTo({top:0,behavior:"smooth"});try{history.replaceState({},,"#")}catch(e){}})});const d=document.getElementById("briefing-form"),u=document.getElementById("form-status");if(d){d.addEventListener("submit",async e=>{e.preventDefault();const t=d.querySelector('button[type="submit"]'),o=new FormData(d),n=()=>{u.textContent="",u.className="form-status"};if(n(),(o.get("website")||"").trim()!=="")return;const a=d.querySelector("#lgpd");if(!a||!a.checked)return u.textContent="Para enviar, marque o consentimento LGPD.",u.classList.add("form-status--error"),void u.scrollIntoView({behavior:"smooth",block:"nearest"});if(!o.get("nome")||!o.get("email")||!o.get("mensagem"))return u.textContent="Preencha nome, e-mail e mensagem.",u.classList.add("form-status--error"),void u.scrollIntoView({behavior:"smooth",block:"nearest"});o.append("timestamp",(new Date).toISOString());t.disabled=!0;const l=t.textContent;t.textContent="Enviando…";try{await fetch(d.action,{method:"POST",body:o,mode:"no-cors"}),u.textContent="Recebido. Entraremos em contato em breve.",u.classList.add("form-status--success"),u.scrollIntoView({behavior:"smooth",block:"nearest"}),d.reset()}catch(e){u.textContent="Não foi possível enviar agora. Tente novamente.",u.classList.add("form-status--error"),u.scrollIntoView({behavior:"smooth",block:"nearest"})}finally{t.disabled=!1,t.textContent=l}}))}const m="desktop-advice",p="b2b_desktop_notice_ack_ts",h=30,v=document.getElementById(m),y=document.getElementById("desktop-share-url");function f(e){return 24*e*60*60*1e3}function g(){try{const e=parseInt(localStorage.getItem(p)||"0",10);return e&&Date.now()-e<f(h)}catch(e){return!1}}function b(){try{localStorage.setItem(p,String(Date.now()))}catch(e){}}function _(){v&&(y&&(y.value=window.location.href),v.hidden=!1,v.classList.add("show"),document.body.classList.add("overlay-open"))}function q(e){v&&(e&&b(),v.classList.remove("show"),v.hidden=!0,document.body.classList.remove("overlay-open"))}function E(){window.matchMedia("(min-width: 1024px)").matches&&!g()&&_()}document.getElementById("desktop-continue")?.addEventListener("click",(()=>q(!0))),document.getElementById("desktop-open-mobile")?.addEventListener("click",(()=>{const e=document.getElementById("desktop-hint"),t=document.getElementById("desktop-share-url");e.hidden=!e.hidden,!e.hidden&&t&&(t.value=window.location.href,t.select())})),document.getElementById("desktop-copy-url")?.addEventListener("click",async()=>{const e=document.getElementById("desktop-share-url");try{await navigator.clipboard.writeText(e.value);const t=document.getElementById("desktop-copy-url"),o=t.textContent;t.textContent="Copiado!",setTimeout(()=>t.textContent=o,1200)}catch(e){}})),document.getElementById("desktop-advice")?.addEventListener("click",e=>{(e.target.hasAttribute("data-close")||e.target.classList.contains("overlay__close"))&&q(!1)}),window.addEventListener("load",E),window.addEventListener("resize",()=>{const e=document.getElementById("desktop-advice");e&&!e.hidden&&(!window.matchMedia("(min-width: 1024px)").matches&&q(!1))})})();
